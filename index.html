<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Building a router</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.0/css/bulma.min.css">

  <link href="https://unpkg.com/vanilla-datatables@latest/dist/vanilla-dataTables.min.css" rel="stylesheet" type="text/css">
  <script src="https://unpkg.com/vanilla-datatables@latest/dist/vanilla-dataTables.min.js" type="text/javascript"></script>
</head>
<body>
  <div class="container">
    <nav class="navbar" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <a class="navbar-item" href="https://bulma.io">
          <img src="https://bulma.io/images/bulma-logo.png" alt="Bulma: a modern CSS framework based on Flexbox" width="112" height="28">
        </a>
        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div class="navbar-menu">
        <div class="navbar-start">
          <!-- navbar items -->
          <a class="navbar-item">Home</a>
          <a class="navbar-item">Receipt</a>
          <a class="navbar-item">Order</a>
          <a class="navbar-item">Inventory</a>
          <a class="navbar-item">Report</a>
        </div>

        <div class="navbar-end">
          <!-- navbar items -->
          <a class="navbar-item">Category</a>
          <a class="navbar-item" href="/menu/product">Product</a>
          <a class="navbar-item">Warehouse</a>
        </div>
      </div>
    </nav>


    <div class="columns">
      <div class="column is-2">
        <aside class="menu">
          <p class="menu-label">
            Views
          </p>
          <ul class="menu-list">
            <li><a href="#/home">Home</a></li>
            <li><a href="#/about">About</a></li>
            <li><a href="#/contact">Contact</a></li>
          </ul>
          <p class="menu-label">
            Admins
          </p>
          <ul class="menu-list">
            <li><a href="#/home">Category</a></li>
            <li><a href="#/product">Product</a></li>
            <li><a href="#/home">Warehouse</a></li>
          </ul>
          <p class="menu-label">
            Actions
          </p>
          <ul class="menu-list">
            <li><a>Receipt</a></li>
            <li><a>Order</a></li>
          </ul>
          <p class="menu-label">
            Transactions
          </p>
          <ul class="menu-list">
            <li><a>Payments</a></li>
            <li><a>Transfers</a></li>
            <li><a>Balance</a></li>
          </ul>
        </aside>
      </div>
      <div class="column">
        <div id="view">

        </div>
      </div>
    </div>

  </div>


  <div id="app">

  </div>


  <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="./js/router.js"></script>
  <!-- <script defer src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script> -->

  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="./plugin/dynatable/jquery.dynatable.js"></script>


  <script>
    const routes = [
    { path: '/home', component: 'home/home' },
    { path: '/about', component: 'about/about' },
    { path: '/contact', component: 'contact/contact' },
    { path: '/product', component: 'product/product_list' },
    { path: '/product/add', component: 'product/product_form' },
    ];

    const router = new AppRouter({
      routes : routes,
      view : 'view'
    });


    /*
    axios.post('http://localhost:3000/api/add', 
    this.name, // the data to post
    { headers: {
      'Content-type': 'application/x-www-form-urlencoded',
      }
    }).then(response => console.log(response) );*/
  </script>

  <script>

    /*
    function loadScript(page){
      console.log('loadScript', page, window.location, window.location.host);

      let url = window.location.protocol +'//'+ window.location.host + page + page + '.js';
      // console.log(url);

      createScript(url, function(){});
    }*/





    let catching = [];
    function createScript(url, callback){

      if(catching.length === 0) { catching[url] = 1; }



      console.log(catching.length);



      let script = document.createElement("script");
      script.type = "text/javascript";
      /*
      if (script.readyState){  //IE
        script.onreadystatechange = function(){
          if (script.readyState == "loaded" || script.readyState == "complete"){
              script.onreadystatechange = null;
              callback();
          }
        };
      } else {  //Others
        script.onload = function(){
          callback();
        };
      }*/

      script.src = url;
     // document.getElementsByTagName("head")[0].appendChild(script);
     document.body.appendChild(script);
   }
 </script>






 <script>
        /*
        let xmlHttp = new XMLHttpRequest();
        xmlHttp.open("GET", 'app.js', true);
                xmlHttp.onreadystatechange = function(){
        if(xmlHttp.readyState === 4 && (xmlHttp.status === 200 || xmlHttp.status == 0) ){
            let responseText = xmlHttp.responseText;
            eleView.innerHTML = responseText;
          }
        }
        xmlHttp.send(null);
        */
        function clickme(){
          new Vue({
            el: "#about",
            data: {
              msg1: 'Hellllllllllllllllo'
            },
            methods: {
             add: function(){
              console.log('add');
            }

          }
        });
          console.log('clickme');
        }
      </script>

      <div id="loadjs">

      </div>

      <script>
       function loadabout(){
        var abc = {};
        let xmlHttp = new XMLHttpRequest();
        xmlHttp.open("GET", 'about/about.js', true);
        xmlHttp.onreadystatechange = function(){
          if(xmlHttp.readyState === 4 && (xmlHttp.status === 200 || xmlHttp.status == 0) ){


          //document.getElementById('loadjs').innerHTML = "<script>" + xmlHttp.responseText + "<\/script>";


          //abc = xmlHttp.responseText;


          //console.log(abc);
            //let responseText = xmlHttp.responseText;
            //eleView.innerHTML = responseText;
          }
        }
        xmlHttp.send(null);
      }



    </script>



    <script>

      function loadScriptAbout(){
        loadScripts('http://localhost:3000/about/about.js', function(){
          //initialization code
        });
      }

      function loadScripts(url, callback){

        var script = document.createElement("script")
        script.type = "text/javascript";

            if (script.readyState){  //IE
              script.onreadystatechange = function(){
                if (script.readyState == "loaded" ||
                  script.readyState == "complete"){
                  script.onreadystatechange = null;
                callback();
              }
            };
            } else {  //Others
              script.onload = function(){
                callback();
              };
            }

            script.src = url;
            document.getElementsByTagName("head")[0].appendChild(script);
          }


        </script>

        <!-- <script src="http://localhost:3000/about/about.js"></script> -->

      </body>
      </html>
