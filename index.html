<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Building a router</title>
  <script></script>
</head>
<body>
  <ul>
    <li><a href="#/home">home</a></li>
    <li><a href="#/about">about</a></li>
    <li><a href="#/contact">contact</a></li>
  </ul>
  <div id="view">

  </div>

    <div id="app">

  </div>


  <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="./js/router.js"></script>

  <script>
    const routes = [
      { path: '/home', component: 'component/home' },
      { path: '/about', component: 'component/about' },
      { path: '/contact', component: 'component/contact' },
    ];

    const router = new AppRouter({
      routes : routes,
      view : 'view'
    });


    /*
    axios.post('http://localhost:3000/api/add', 
    this.name, // the data to post
    { headers: {
      'Content-type': 'application/x-www-form-urlencoded',
      }
    }).then(response => console.log(response) );*/
  </script>

  <script>
    function loadScript(page){
      console.log('loadScript', page, window.location, window.location.host);

      let url = window.location.protocol +'//'+ window.location.host + page + page + '.js';
      // console.log(url);

      createScript(url, function(){});
    }





    let catching = [];
    function createScript(url, callback){
      
      if(catching.length === 0) { catching[url] = 1; }



      console.log(catching.length);
   


      let script = document.createElement("script");
      script.type = "text/javascript";
      /*
      if (script.readyState){  //IE
        script.onreadystatechange = function(){
          if (script.readyState == "loaded" || script.readyState == "complete"){
              script.onreadystatechange = null;
              callback();
          }
        };
      } else {  //Others
        script.onload = function(){
          callback();
        };
      }*/

      script.src = url;
     // document.getElementsByTagName("head")[0].appendChild(script);
      document.body.appendChild(script);
    }
  </script>






  <script>
        /*
        let xmlHttp = new XMLHttpRequest();
        xmlHttp.open("GET", 'app.js', true);
                xmlHttp.onreadystatechange = function(){
        if(xmlHttp.readyState === 4 && (xmlHttp.status === 200 || xmlHttp.status == 0) ){
            let responseText = xmlHttp.responseText;
            eleView.innerHTML = responseText;
          }
        }
        xmlHttp.send(null);
        */
        function clickme(){
          new Vue({
            el: "#about",
            data: {
              msg1: 'Hellllllllllllllllo'
            },
            methods: {
               add: function(){
                console.log('add');
              }

            }
          });
          console.log('clickme');
        }
  </script>

  <div id="loadjs">
    
  </div>

  <script>
     function loadabout(){
      var abc = {};
        let xmlHttp = new XMLHttpRequest();
        xmlHttp.open("GET", 'about/about.js', true);
                xmlHttp.onreadystatechange = function(){
        if(xmlHttp.readyState === 4 && (xmlHttp.status === 200 || xmlHttp.status == 0) ){


          //document.getElementById('loadjs').innerHTML = "<script>" + xmlHttp.responseText + "<\/script>";


          //abc = xmlHttp.responseText;


          //console.log(abc);
            //let responseText = xmlHttp.responseText;
            //eleView.innerHTML = responseText;
          }
        }
        xmlHttp.send(null);
     }



  </script>



  <script>

    function loadScriptAbout(){
        loadScripts('http://localhost:3000/about/about.js', function(){
          //initialization code
        });
    }
    
  function loadScripts(url, callback){

            var script = document.createElement("script")
            script.type = "text/javascript";

            if (script.readyState){  //IE
                script.onreadystatechange = function(){
                    if (script.readyState == "loaded" ||
                            script.readyState == "complete"){
                        script.onreadystatechange = null;
                        callback();
                    }
                };
            } else {  //Others
                script.onload = function(){
                    callback();
                };
            }

            script.src = url;
            document.getElementsByTagName("head")[0].appendChild(script);
        }


  </script>

  <!-- <script src="http://localhost:3000/about/about.js"></script> -->

</body>
</html>
